% !TeX spellcheck = en_US
\documentclass[12pt, a4paper]{article}
\usepackage[table]{xcolor}
\usepackage[scaled]{helvet}
\renewcommand\familydefault{\sfdefault}
\usepackage[T1]{fontenc}
\usepackage[margin=0.5in]{geometry}
\usepackage{float}
\usepackage{framed}
\usepackage{multicol}
\usepackage{amsmath}
\usepackage[framemethod=TikZ]{mdframed}
\usepackage{graphicx}
\usepackage{enumitem}
\setlist{nosep}
\usepackage{booktabs}
\usepackage{tikzsymbols}
\usepackage{hyperref}
\hypersetup{
	colorlinks,
	citecolor=black,
	filecolor=black,
	linkcolor=black,
	urlcolor=black
}
\usepackage{multirow}

\newcounter{note}\setcounter{note}{0}
\renewcommand{\thenote}{\arabic{note}}
\newenvironment{note}[1]{
	\begin{minipage}{\linewidth}
	\stepcounter{note}
	\ifstrempty{#1}{
		\mdfsetup{
			frametitle={
				\tikz[baseline=(current bounding box.east),outer sep=0pt]
				\node[anchor=east,rectangle,fill=blue!20]
				{\strut Note~\thenote};
			}
		}
	}{
		\mdfsetup{
			frametitle={
				\tikz[baseline=(current bounding box.east),outer sep=0pt]
				\node[anchor=east,rectangle,fill=blue!20]
				{\strut Note~\thenote:~#1};
			}
		}
	}
	\mdfsetup{innertopmargin=0pt,linecolor=blue!20,linewidth=2pt,topline=true,frametitleaboveskip=\dimexpr-\ht\strutbox\relax}
	\begin{mdframed}[]\relax
}{
	\end{mdframed}\end{minipage}
}

\begin{document}
	\tableofcontents
	\vspace{2em}
	\textbf{Contributors:}
	\begin{itemize}
		\item Daniel Fitz (Sanchez)
	\end{itemize}
	
	\section{Sem Outline}
	\begin{table}[H]
		\begin{tabular}{ll}
			Week (dates) & Lecture\\
			1 & Computer Networks and the Internet\\
			2 & Principles of Nw Apps: HTTP, SMTP, DNS\\
			3 & Application Layer: P2P, CDN, Sockets\\
			4 & Networking at UQ\\
			5 & Transport Layer: UDP\\
			6 & Transport Layer: TCP\\
			7 & Network Layer: Data Plane\\
			8 & Network Layer: Control Place\\
			9 & Link Layer\\
			11 & Wireless and Mobile\\
			12 & Security\\
			13 & Multimedia
		\end{tabular}
		\centering
		\caption{Week Outline}
	\end{table}


\newpage
\begin{multicols*}{2}
	
	\section{Exam Notes}
	The exam will consist of:
	\begin{itemize}
		\item A number of analytical questions, similar to the tutorial questions. You won't be asked any complex analytic problems which are completely different to those in tutorials
		\item A number of short answer questions of the type: compare XXX to YYY and explain the differences, or advantages/disadvantages of these protocols/algorithms/applications/techniques
		\item Questions about different protocols, their functions and where they fit in the network protocol stack. You won't be asked about protocols you have not seen in lectures
		\item Questions about packet exchanges in some common protocols (e.g. DHCP, DNS, ARP, TCP, HTTP)
	\end{itemize}
	\textit{No multiple choice questions this year \Sadey[][yellow!70] }
	\subsection{Chapter 1}
	\begin{itemize}
		\item What is the Internet
		\item Network Edge
		\item Network Core
		\item Delay, Loss Throughput
		\item Protocol Layers and their service models
	\end{itemize}
	\textit{Not Examinable:} Networks under attack, history of networking
	\subsection{Chapter 2: Application Layer}
	\begin{itemize}
		\item Principles of Networked Applications
		\item Web and HTTP (including options covered in lectures/labs)
		\item Electronic Mail
		\item DNS (but no detailed message/packet format)
		\item Peer-to-peer
		\item Internet Video
	\end{itemize}
	\textit{Not Examinable:} Detailed message formats for DNS and for email, case studies, socket programming
	\subsection{Chapter 3: Transport Layer}
	All Material
	\subsection{Chapter 4: Network Layer -- Data Plane}
	All Material
	\subsection{Chapter 5: Network Layer -- Control Plane}
	Most of the material covered, except as below, including a general overview of what SNMP does. You should understand link-state and distance vector routing. You won't be asked any numerical questions with distance-vector. For routing protocols, you should know about BGP, OSPF, IS-IS, RIP (which isn't in lectures, but is an example of an intra-AS distance-vector algorithm). All you really need to know about these algorithms are whether they are inter-AS or intra-AS, link-state or distance-vector.\\
	\textit{Not Examinable:} Details of SNMP architecture and packet formats. Details of BGP (5.4.2, 5.4.3, 5.4.5 are not examinable)
	\subsection{Chapter 6: Link Layer}
	\begin{itemize}
		\item General Principles
		\item Error Detection and Correction -- services provided, differences between correction and detection
		\item Multiple Access Links and Protocols, but NOT DOCSIS
		\item Switched Local Area Networks
		\item ``Day in the Life of a Web Page Request'' -- details of each stage are covered in the earlier sections
	\end{itemize}
	\textit{Not Examinable:} Exactly how to calculate parity, checksum, CRC, DOCSIS, MPLS, Data Center Networking
	\subsection{Chapter 7: Wireless}
	\begin{itemize}
		\item General Principles
		\item Wireless characteristics
		\item WiFi (IEEE 802.11) except as below
	\end{itemize}
	\textit{Not Examinable:} Mobility in WiFi, advanced features in WiFi (Ch 7.3.5). Personal area Networks. Cellular Internet Access. Mobility Management, Mobile IP, Mobility effects on higher layers
	\subsection{Chapter 8: Security}
	\begin{itemize}
		\item What is network security -- confidentiality, integrity, authentication
		\item Cryptographic principles -- symmetric and public key algorithms (you won't be asked to calculate any ciphers)
		\item Names, types and uses of common cyphers, at least: Diffie-Hellman, RSA, DES, 3DES, AES, MD5, SHA-1
		\item Message integrity and signatures
		\item SSL and TLS
		\item IP Sec and VPN
		\item Firewalls and Intrusion Detection Systems -- general principles
	\end{itemize}
	\textit{Not Examinable:} Details of cipher algorithms, key lengths. Securing Email. Wireless security
	\subsection{Chapter 9: Multimedia}
	\begin{itemize}
		\item Properties of multimedia
		\item UDP and HTTP streaming
		\item Voice over IP
		\item Protocols -- RTP, SIP
	\end{itemize}
	\textit{Not Examinable:} Case Studies (e.g. Skype). Network Support for multimedia, such as token-bucket, diffserv, QoS
	\subsection{Packet Formats}
	Must understand and decode the packet contents if given a byte stream for:
	\begin{description}
		\item[Link Layer:] Ethernet (but not VLAN packets)
		\item[Network Layer:] IPv4 (not IPv6), you won't be asked to decode option fields, but they may be present. These IPv4 packets may contain protocols like DNS or ICMP, but you won't be asked to decode the contents of those packets
		\item[Transport Layer:] TCP, UDP.. You won't be asked to decode option fields, by they may be present
		\item[Application Layer:] Simple HTTP request and reply. If you are required to decode text messages you will be given a table of ASCII codes
	\end{description}
	\newpage
	
	\section{Chapter 1}
	\input{lec1}
	
	\section{Chapter 2}
	\input{lec2}
	\input{lec3}
	
	\section{Chapter 3}
	\input{lec5}
	\input{lec6}
	
	\section{Chapter 4}
	\input{lec7}
	
	\section{Chapter 5}
	% Add BGP, OSPF, IS-IS, RIP (know if they are inter-AS or intra-AS, link-state or distance-vector)
	\input{lec8}
	
	\section{Chapter 6}
	\input{lec9}
	
	\section{Chapter 7}
	\input{lec11}
	
	\section{Chapter 8}
	\input{lec12}
	
	\section{Chapter 9}
	\input{lec13}
	
	\section{Day in the life of a web request}
	\subsection{Connecting to the Internet}
	\begin{itemize}
		\item connecting laptop needs to get its own IP address, addr of first-hop router, addr of DNS server: use \textbf{DHCP}
		\item DHCP request \textbf{encapsulated} in \textbf{UDP}, encapsulated in \textbf{IP}, encapsulated in \textbf{802.3} Ethernet
		\item Ethernet frame \textbf{broadcast} (dest: FFFFFFFFFFFF) on LAN received at router running \textbf{DHCP} server
		\item Ethernet \textbf{demuxed} to IP demuxed, UDP demuxed to DHCP
		\item DHCP server formulates \textbf{DHCP ACK} containing client's IP address, IP address of first-hop router for client, name and IP address of DNS server
		\item encapsulate at DHCP server, frame forwarded (\textbf{switch learning}) through LAN, demultiplexing at client
		\item DHCP client receives DHCP ACK reply
	\end{itemize}
	\textit{Client now has IP address, knows name and addr of DNS server, IP address of its first-hop router}
	\subsubsection{ARP (before DNS, before HTTP)}
	\begin{itemize}
		\item before sending \textbf{HTTP} request, need IP address of www.google.com: \textbf{DNS}
		\item DNS query created, encapsulated in UDP, encapsulated in IP, encapsulated in Ethernet. To send frame to router, need MAC address of router interface: \textbf{ARP}
		\item\textbf{ARP query} broadcast, received by router, which replies with \textbf{ARP reply} giving MAC address of router interface
		\item client now knows MAC address of first hop router, so can now send frame containing DNS query
	\end{itemize}
	\subsubsection{using DNS}
	\begin{itemize}
		\item IP datagram containing DNS query forwarded via LAN switch from client to $1^{st}$ hop router
		\item IP datagram forwarded from campus network into Comcast network, routed (tables created by \textbf{RIP, OSPF, IS-IS} and/or \textbf{BGP} routing protocols) to DNS server
		\item demuxed to DNS server
		\item DNS server replies to client with IP address of www.google.com
	\end{itemize}
	\subsubsection{TCP connection carrying HTTP}
	\begin{itemize}
		\item to send HTTP request, client first opens \textbf{TCP socket} to web server
		\item TCP \textbf{SYN segment} (step 1 in 3-way handshake) inter-domain routed to web server
		\item web server responds with \textbf{TCP SYNACK} (step 2 in 3-way handshake)
		\item TCP \textbf{connection established}
	\end{itemize}
	\subsubsection{HTTP request/reply}
	\begin{itemize}
		\item \textbf{HTTP request} sent into TCP socket
		\item IP datagram containing HTTP request routed to www.google.com
		\item web server responds with \textbf{HTTP reply} (containing web page)
		\item IP datagram containing HTTP reply routed back to client
	\end{itemize}
	
\end{multicols*}	
	
	\newpage
	\section{Packet Format}
	\input{format}
	
	\newpage
	\begin{multicols*}{2}
		\section{Protocols}
		\input{protocols}
	\end{multicols*}
	
	\newpage
	\begin{multicols*}{2}
	\section{Acronyms}
	\input{acronyms}
\end{multicols*}

\newpage
\section{2017 solutions}
\subsection{Question 1}
\begin{figure}[H]
	\includegraphics[width=\linewidth]{q1}
\end{figure}
\begin{table}[H]
	\centering
	\caption{Dijkstra's method}
	\rowcolors{2}{gray!25}{white}
	\begin{tabular}{lrrrrrrrr}
		\toprule
		Step &       N' & D(a),p(a) & D(b),p(b) & D(c),p(c) & D(d),p(d) & D(e),p(e) & D(f),p(f) & D(h),p(h) \\ \midrule
		0    &        g &       4,g &  $\infty$ &       1,g &  $\infty$ &  $\infty$ &  $\infty$ &       8,g \\
		1    &       gc &       4,g &       2,c &       1,g &       4,c &  $\infty$ &  $\infty$ &       8,g \\
		2    &      gcb &       3,b &       2,c &           &       4,c &  $\infty$ &  $\infty$ &       8,g \\
		3    &     gcba &       3,b &           &           &       4,c &  $\infty$ &       5,a &       8,g \\
		4    &    gcbaf &           &           &           &       4,c &       6,f &       5,a &       8,g \\
		5    &   gcbafe &           &           &           &       4,c &       6,f &           &       8,g \\
		6    &  gcbafed &           &           &           &       4,c &           &           &       6,d \\
		7    & gcbafedh &           &           &           &           &           &           &       6,d \\
		8    &          &           &           &           &           &           &           &
	\end{tabular}
\end{table}
\begin{table}[H]
	\begin{tabular}{lll}
		\toprule
		From node g to & Minimum Path & Minimum Distance \\ \midrule
		a              & gcba         & 3                \\
		b              & gcb          & 2                \\
		c              & gc           & 1                \\
		d              & gcd          & 4                \\
		e              & gcbafe       & 6                \\
		f              & gcbaf        & 5                \\
		h              & gcdh         & 6
	\end{tabular}
\end{table}
\begin{figure}[H]
	\includegraphics[width=\linewidth]{q1b}
\end{figure}
If output ports from \textbf{g} to nodes \textbf{a}, \textbf{c}, and \textbf{h} are called `ga', `gc', and `gh' respectively, show a forwarding table, based on the above minimum paths, which shows the output links from g for all destination nodes
\begin{table}[H]
	\centering
	\begin{tabular}{lc}
		\toprule
		List of destination nodes & To be sent over link\\
		\midrule
		None (other routes faster) & ga\\
		All (quickest routes for all) & gc\\
		Non (other routes faster) & gh
	\end{tabular}
\end{table}
\subsection{Question 2}
\begin{table}[H]
	\centering
	\begin{tabular}{p{10cm}ll}
		\toprule
		Purpose of this Protocol                                                        & Name           & Layer       \\ \midrule
		Example: Retrieve web pages                                                     & HTTP           & Application \\
		Convey network management control and information messages                      & SNMP           & Application \\
		Send email message to a mail server                                             & SMTP           & Application \\
		Download email messages from a mail server                                      & IMAP/POP3      & Application \\
		``Ping'' a host                                                                 & IMCP           & Network     \\
		Convert a hostname to an IP address                                             & DNS            & Application \\
		Convert an IP address to a MAC address                                          & ARP            & Link        \\
		Sending intra-AS link-state routing messages                                    & OSPF/IS-IS     & Network     \\
		Setting up multimedia stream connections                                        & SIP            & Transport   \\
		Providing connectivity between hosts and access points in WiFi networks         & 802.11         & Physical    \\
		An enhanced version of connection-oriented stream transport which adds security & QUIC (TLS/SSL) & Application
	\end{tabular}
\end{table}
\subsection{Question 3}
TCP packet inside an IP packet inside Ethernet frame (preamble and CRC)\\
\texttt{aa aa aa aa aa aa aa ab}\qquad \texttt{00 00 5e 00 01 08 98 90}\\
\texttt{96 d8 35 a9 08 00 45 00\qquad 00 28 41 71 40 00 80 06}\\
\texttt{00 00 0a 21 02 98 d0 5c\qquad ec 52 e1 75 00 50 e7 3e}\\
\texttt{50 0c 1b a0 80 d4 50 11\qquad f7 39 c9 82 00 00 00 00}\\
\texttt{00 00 00 00 c8 aa ab cd}\\
IP is 40 bytes long\\
\begin{table}[H]
	\begin{tabular}{ll}
		\toprule
		Field                        & (Format) Value                                           \\ \midrule
		Ethernet Source Address      & (Hexadecimal) 98:90:96:d8:35:a9                          \\
		Ethernet Destination Address & (Hexadecimal) 00:00:5e:00:01:08                          \\
		IP Source Address            & (Dotted Decimal) 0a 21 02 98 $\rightarrow$ 10.33.2.152   \\
		IP Destination Address       & (Dotted Decimal) d0 5c ec 52 $\rightarrow$ 208.92.236.82 \\
		TCP Source Port              & (Decimal) e1 75 $\rightarrow$ 57717                      \\
		TCP Destination Port         & (Decimal) 00 50 $\rightarrow$ 80                         \\
		IP Version                   & (Decimal) 4                                              \\
		IP Header Length in bytes    & (Decimal) 20                                             \\
		IP Datagram Length in bytes  & (Decimal) 28                                              \\
		TCP Flags                    & (Binary) URG: 0                                          \\
		                             & (Binary) ACK: 1                                          \\
		                             & (Binary) PSH: 0                                          \\
		                             & (Binary) RST: 0                                          \\
		                             & (Binary) SYN: 0                                          \\
		                             & (Binary) FIN: 1                                          \\
		TCP Sequence Number          & (Hex) e7 3e 50 0c                                        \\
		TCP Acknowledgment Number    & (Hex) 1b a0 80 d4                                        \\
		IP Header Checksum           & (Hex) 00 00                                              \\
		TCP Internet Checksum        & (Hex) c9 82                                              \\
		Ethernet CRC                 & (Hex) ab cd
	\end{tabular}
\end{table}
\subsection{Question 4}
\subsubsection{Link-state and distance-vector}
Distance-vector, each node tells its neighbors everything it knows about the network. In Link-State, each router broadcasts the state of its own links to the entire network. Leaving each router to build up a graph of the network. LS has the advantage that is updates router's graphs quicker across the network because it broadcasts changes. DV advantage is that it uses less memory and CPU by not having to build up graphs, only populate a routing table
\subsubsection{Destination-based forwarding and Software-defined-networking}
Destination-based forwarding forwards packets towards their end destination by a routing table of destinations and links. SDN uses a central controller to direct packets using more complex rules than just routing tables. Advantage of destination-based: is that's very simple to implement and is self-managing. Advantage of SDN: you can route packets by type of traffic or link cost (peering agreement)
\subsubsection{TCP and UDP}
TCP uses a 3-way handshake to open a `connection' between hosts, and within that connection, packets are guaranteed to arrive eventually. UDP packets are send off and forgotten about, and may not arrive. TCP advantage: IP address can not be spoofed. UDP advantage: save the overhead dealing with connections for simple messages or real-time applications
\subsubsection{Go-Back-N and Selective-Repeat}
GBN will retransmit all the packets after the last successful ACK that timed out, whereas SR will only retransmit the lost packets that weren't ACK'd. GBN advantage is it doesn't need to ACK every single packet, just every X number. SR saves retransmitting even correctly received packet


\end{document}